{"version":3,"sources":["piano.min.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","scaleKeyboard","container","scale","x","y","style","insertToString","str","index","count","add","slice","removeMultipleEventListener","pianoInstance","master","pianoEnhancedEvents","forEach","ee","el","target","dataset","pianoKey","removeEventListener","eventName","eventHandler","addMultipleListeners","context","child","events","handler","length","push","Array","event","timeStamp","lastTimeStamp","addEventListener","debounce","func","wait","immediate","timeout","args","arguments","later","apply","callNow","clearTimeout","setTimeout","_typeof","Symbol","iterator","obj","constructor","prototype","_extends","Object","assign","i","source","key","hasOwnProperty","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","Piano","options","_this","document","querySelectorAll","console","warn","defaults","triggerEvents","slideContent","slideContainer","onBeforeHidden","onHidden","layouts","autohide","autoScroll","settings","createElement","className","detectInputs","body","appendChild","piano","contains","hideKeyboard","value","parent","overrideOptions","_this2","_k","triggers","datas","shift","pianoPosition","indexOf","position","replace","split","layout","pianoLayout","limit","pianoLimit","animationIn","pianoAnimationIn","animationOut","pianoAnimationOut","pianoScale","eventID","pianoEventId","elementEvent","createEvent","initEvent","submitEvent","clearKeyboards","currentTarget","displayKeyboard","preventDefault","triggerSize","triggerIdx","createKeyboard","currentKeyboard","rowsContainer","rows","li","name","innerHTML","textContent","keyPressed","bind","focus","isNaN","left","top","display","classList","remove","scrollWindow","querySelector","getBoundingClientRect","height","input","cursor","selectionStart","end","selectionEnd","diff","offset","innerText","test","deleteOffset","switchCase","dispatchEvent","evt","fireEvent","posY","window","scrollY","scrollTo","to","duration","_this3","difference","perTick","keys","keySize","children","toUpperCase","toLowerCase","_this4","animationDuration","k","firstChild","match","_this5"],"mappings":"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","file":"piano.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"piano\"] = factory();\n\telse\n\t\troot[\"piano\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Piano = function () {\n\t  function Piano(options) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, Piano);\n\t\n\t    if (document.querySelectorAll('#piano').length) {\n\t      console.warn('piano is already initialized, not creating.');\n\t      return false;\n\t    }\n\t    this.defaults = {\n\t      triggerEvents: ['click'],\n\t      slideContent: false,\n\t      slideContainer: 'body',\n\t      onBeforeHidden: function onBeforeHidden() {},\n\t      onHidden: function onHidden() {},\n\t      layouts: options.layouts || [],\n\t      autohide: true,\n\t      autoScroll: true\n\t    };\n\t    this.pianoEnhancedEvents = [];\n\t    this.pianoInstance = [];\n\t    this.settings = _extends(this.defaults, options);\n\t    this.container = _extends(document.createElement('div'), { id: 'piano', className: 'piano-container animated' });\n\t    this.detectInputs();\n\t    document.body.appendChild(this.container);\n\t    // Make sure to hide keyboard when clicking outside\n\t    if (this.settings.autohide) {\n\t      var handler = function handler(event) {\n\t        var dataset = event.target.dataset || {};\n\t        if (dataset.piano !== '' && _this.container && !_this.container.contains(event.target)) {\n\t          _this.hideKeyboard();\n\t        }\n\t      };\n\t      addMultipleListeners(this, document, this.defaults.triggerEvents, document, handler);\n\t    }\n\t  }\n\t\n\t  _createClass(Piano, [{\n\t    key: 'createKeyboard',\n\t    value: function createKeyboard(parent, target, overrideOptions) {\n\t      var _this2 = this;\n\t\n\t      var _k = _extends({}, parent);\n\t      delete _k.pianoInstance;\n\t      delete _k.triggers;\n\t      delete _k.layouts;\n\t      var datas = target.dataset;\n\t      var options = {};\n\t\n\t      _k.shift = false;\n\t\n\t      if (datas.pianoPosition) {\n\t        if (datas.pianoPosition.indexOf('absolute') > -1) {\n\t          options.position = datas.pianoPosition.replace(/absolute,\\s/gi, '').split(',');\n\t        } else {\n\t          options.position = datas.pianoPosition ? datas.pianoPosition.split(',') : [];\n\t        }\n\t      } else {\n\t        //console.warn('It seems you have incorrect values in your data-piano-position attribute on element: ', target)\n\t        options.position = [];\n\t      }\n\t\n\t      options.layout = datas.pianoLayout;\n\t      options.limit = datas.pianoLimit;\n\t      options.animationIn = datas.pianoAnimationIn;\n\t      options.animationOut = datas.pianoAnimationOut;\n\t      options.scale = datas.pianoScale;\n\t\n\t      if (overrideOptions) {\n\t        options = _extends(options, overrideOptions);\n\t      }\n\t\n\t      var eventID = datas.pianoEventId;\n\t      var elementEvent = null;\n\t      if (eventID) {\n\t        elementEvent = document.createEvent('Event');\n\t        elementEvent.initEvent(eventID, true, true);\n\t      }\n\t\n\t      // could be improve with a default object\n\t      _k.settings = {\n\t        position: {\n\t          x: options.position[0] || 'center',\n\t          y: options.position[1] || 'bottom'\n\t        },\n\t        layout: options.layout || 'default',\n\t        limit: options.limit || -1,\n\t        submitEvent: elementEvent,\n\t        animationIn: options.animationIn || 'fadeInUp',\n\t        animationOut: options.animationOut || 'fadeOutDown',\n\t        scale: options.scale || 1\n\t      };\n\t      var handler = function handler(event) {\n\t        _this2.clearKeyboards(_k, _this2);\n\t        _this2.currentTarget = event.target;\n\t        _this2.displayKeyboard(_k);\n\t        event.preventDefault();\n\t      };\n\t      addMultipleListeners(this, _k, this.defaults.triggerEvents, target, handler);\n\t      this.pianoInstance.push(_k);\n\t    }\n\t  }, {\n\t    key: 'detectInputs',\n\t    value: function detectInputs() {\n\t      this.triggers = document.querySelectorAll('[data-piano]');\n\t      var triggerSize = this.triggers.length;\n\t      for (var triggerIdx = 0; triggerIdx < triggerSize; triggerIdx++) {\n\t        // console.log(this, this.triggers[triggerIdx])\n\t        this.createKeyboard(this, this.triggers[triggerIdx]);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'addTarget',\n\t    value: function addTarget(el, options) {\n\t      this.createKeyboard(this, el, options);\n\t    }\n\t  }, {\n\t    key: 'displayKeyboard',\n\t    value: function displayKeyboard(instance) {\n\t      var _k = this;\n\t      _k.currentKeyboard = instance;\n\t\n\t      var rowsContainer = document.createElement('div');\n\t      rowsContainer.className = 'piano-rows';\n\t\n\t      var layout = this.settings.layouts[instance.settings.layout];\n\t\n\t      var rows = [];\n\t      rows.push(document.createElement('ul'));\n\t\n\t      for (var i in layout) {\n\t        var li = document.createElement('li');\n\t        if (layout[i][0] === 'break') {\n\t          rowsContainer.appendChild(rows[rows.length - 1]);\n\t          rows.push(document.createElement('ul'));\n\t        } else {\n\t          var key = document.createElement('button');\n\t          if (_typeof(layout[i][0]) === 'object') {\n\t            li.className = layout[i][0].name;\n\t            key.className = 'key ' + layout[i][0].name;\n\t            key.innerHTML = layout[i][0].value;\n\t            key.dataset.pianoKey = layout[i][0].name;\n\t          } else {\n\t            key.className = 'key ' + layout[i];\n\t            key.textContent = layout[i][0];\n\t            key.dataset.pianoKey = layout[i][0];\n\t          }\n\t          addMultipleListeners(this, _k, _k.settings.triggerEvents, key, function (event) {\n\t            debounce(this.keyPressed(event), 300, false);\n\t          }.bind(this));\n\t          li.appendChild(key);\n\t        }\n\t        rowsContainer.appendChild(rows[rows.length - 1]);\n\t\n\t        rows[rows.length - 1].appendChild(li);\n\t\n\t        this.currentTarget.focus();\n\t      }\n\t\n\t      if (isNaN(instance.settings.position.x) || isNaN(instance.settings.position.y)) {\n\t        this.container.className += ' ' + instance.settings.position.x;\n\t        this.container.className += ' ' + instance.settings.position.y;\n\t      } else {\n\t        this.container.style.left = instance.settings.position.x + 'px';\n\t        this.container.style.top = instance.settings.position.y + 'px';\n\t      }\n\t\n\t      this.container.style.display = 'block';\n\t      this.container.classList.remove(this.currentKeyboard.settings.animationOut);\n\t      this.container.appendChild(rowsContainer);\n\t      this.container.classList.add(this.currentKeyboard.settings.animationIn);\n\t\n\t      var scale = _k.currentKeyboard.settings.scale;\n\t      if (scale > 1) {\n\t        var x = _k.currentKeyboard.settings.position.x;\n\t        var y = _k.currentKeyboard.settings.position.y;\n\t        scaleKeyboard(rowsContainer, scale, x, y);\n\t      }\n\t\n\t      document.body.classList.add('piano-open');\n\t      this.settings.autoScroll && this.scrollWindow();\n\t      if (this.settings.slideContent) {\n\t        document.querySelector(this.settings.slideContainer).style.top = '-' + rowsContainer.getBoundingClientRect().height / 2 + 'px';\n\t      }\n\t    }\n\t  }, {\n\t    key: 'keyPressed',\n\t    value: function keyPressed(event) {\n\t      var target = event.target;\n\t      var value = target.textContent;\n\t      var input = this.currentTarget;\n\t      var cursor = input.selectionStart;\n\t      var end = input.selectionEnd;\n\t      var diff = end - cursor || 1;\n\t      var offset = event.target.innerText.length;\n\t      var limit = this.currentKeyboard.settings.limit;\n\t      var submitEvent = this.currentKeyboard.settings.submitEvent;\n\t\n\t      // There are still small bugs with selections.\n\t      if (/del/i.test(target.className)) {\n\t        var deleteOffset = cursor ? -1 : 0;\n\t        input.value = insertToString(input.value, cursor + deleteOffset, diff, '');\n\t        offset = -1;\n\t      } else if (/space/i.test(target.className)) {\n\t        if (input.value.length <= limit || limit === -1) {\n\t          input.value = insertToString(input.value, cursor, diff - 1, ' ');\n\t        }\n\t      } else if (/shift/i.test(target.className)) {\n\t        this.switchCase();\n\t      } else if (/larr/i.test(target.className)) {\n\t        offset = -1;\n\t      } else if (/rarr/i.test(target.className)) {\n\t        offset = 1;\n\t      } else if (/hide/i.test(target.className)) {\n\t        this.hideKeyboard();\n\t      } else if (/submit/i.test(target.className)) {\n\t        if (submitEvent) {\n\t          input.dispatchEvent(submitEvent);\n\t        } else {\n\t          console.warn('You did not provide a data-piano-event-id attribute.');\n\t        }\n\t      } else {\n\t        if (input.value.length <= limit || limit === -1) {\n\t          input.value = insertToString(input.value, cursor, diff - 1, value);\n\t        }\n\t      }\n\t\n\t      input.selectionStart = cursor + offset;\n\t      input.selectionEnd = cursor + offset;\n\t\n\t      if (document.createEvent) {\n\t        var evt = document.createEvent('HTMLEvents');\n\t        evt.initEvent('input', false, true);\n\t        input.dispatchEvent(evt);\n\t      } else {\n\t        input.fireEvent('input');\n\t      }\n\t\n\t      input.focus();\n\t      event.preventDefault();\n\t    }\n\t  }, {\n\t    key: 'scrollWindow',\n\t    value: function scrollWindow() {\n\t      var input = this.currentTarget.getBoundingClientRect().top - 100;\n\t      var posY = window.scrollY + input;\n\t      input > 0 && this.scrollTo(posY, 300);\n\t    }\n\t  }, {\n\t    key: 'scrollTo',\n\t    value: function scrollTo(to, duration) {\n\t      var _this3 = this;\n\t\n\t      if (duration <= 0) return;\n\t      var difference = to - window.scrollY;\n\t      var perTick = difference / duration * 10;\n\t      setTimeout(function () {\n\t        window.scrollTo(0, window.scrollY + perTick);\n\t        if (window.scrollY === to) return;\n\t        _this3.scrollTo(to, duration - 10);\n\t      }, 10);\n\t    }\n\t  }, {\n\t    key: 'switchCase',\n\t    value: function switchCase() {\n\t      var shift = this.currentKeyboard.shift = !this.currentKeyboard.shift;\n\t      var keys = document.querySelectorAll('.piano-rows > ul > li');\n\t      var layout = this.settings.layouts[this.currentKeyboard.settings.layout];\n\t      var keySize = keys.length;\n\t\n\t      for (var i = 0; i < keySize; i++) {\n\t        var target = keys[i].children[0];\n\t        if (target) {\n\t          var value = target.textContent;\n\t          if (layout[i].length > 1 && layout[i][0].length > 0) {\n\t            target.textContent = shift ? layout[i][1] : layout[i][0];\n\t          } else {\n\t            target.textContent = shift ? value.toUpperCase() : value.toLowerCase();\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'hideKeyboard',\n\t    value: function hideKeyboard() {\n\t      var _this4 = this;\n\t\n\t      if (this.container.style.display === 'block') {\n\t        typeof this.settings.onBeforeHidden === 'function' && this.settings.onBeforeHidden();\n\t        this.container.classList.remove(this.currentKeyboard.settings.animationIn);\n\t        this.container.classList.add(this.currentKeyboard.settings.animationOut);\n\t        setTimeout(function () {\n\t          _this4.container.style.display = 'none';\n\t          typeof _this4.settings.onHidden === 'function' && _this4.settings.onHidden();\n\t        }, this.container.style.animationDuration * 1000 || 300);\n\t        document.body.classList.remove('piano-open');\n\t        if (this.settings.slideContent) {\n\t          document.querySelector(this.settings.slideContainer).style.top = 0;\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'clearKeyboards',\n\t    value: function clearKeyboards(k, parent, master) {\n\t      removeMultipleEventListener(k, master);\n\t      if (this.container && this.container.firstChild) {\n\t        this.container.firstChild.remove();\n\t        this.container.style.top = this.container.style.left = '';\n\t        this.container.className = 'piano-container animated';\n\t        this.currentKeyboard = null;\n\t        document.body.classList.remove('piano-open');\n\t        if (this.settings.slideContent) {\n\t          document.querySelector(this.settings.slideContainer).style.top = 0;\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'isOpen',\n\t    value: function isOpen() {\n\t      return document.body.className.match(/\\piano-open\\b/) !== null;\n\t    }\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      var _this5 = this;\n\t\n\t      if (this.pianoInstance) {\n\t        this.pianoInstance.forEach(function (instance) {\n\t          _this5.clearKeyboards(instance, _this5);\n\t        });\n\t      }\n\t      if (document.pianoEnhancedEvents) {\n\t        document.pianoEnhancedEvents.forEach(function (ee) {\n\t          ee.forEach(function (el) {\n\t            el.target.removeEventListener(el.event, el.eventHandler);\n\t          });\n\t        });\n\t      }\n\t      if (this.container) {\n\t        this.container.remove();\n\t      }\n\t      this.defaults = null;\n\t      this.pianoEnhancedEvents = null;\n\t      this.pianoInstance = null;\n\t      this.settings = null;\n\t      this.container = null;\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return Piano;\n\t}();\n\t\n\tfunction scaleKeyboard(container, scale, x, y) {\n\t  container.style['-webkit-transform'] = 'scale(' + scale + ')';\n\t  container.style['-moz-transform'] = 'scale(' + scale + ')';\n\t  container.style['-ms-transform'] = 'scale(' + scale + ')';\n\t  container.style['-o-transform'] = 'scale(' + scale + ')';\n\t  container.style['transform'] = 'scale(' + scale + ')';\n\t\n\t  container.style['-webkit-transform-origin'] = x + ' ' + y;\n\t  container.style['-moz-transform-origin'] = x + ' ' + y;\n\t  container.style['-ms-transform-origin'] = x + ' ' + y;\n\t  container.style['-o-transform-origin'] = x + ' ' + y;\n\t  container.style['transform-origin'] = x + ' ' + y;\n\t}\n\t\n\tfunction insertToString(str, index, count, add) {\n\t  return str.slice(0, index) + (add || '') + str.slice(index + count);\n\t}\n\t\n\tfunction removeMultipleEventListener(pianoInstance, master) {\n\t  pianoInstance.pianoEnhancedEvents.forEach(function (ee) {\n\t    ee.forEach(function (el) {\n\t      if (el.target.dataset && el.target.dataset.pianoKey || master) {\n\t        el.target.removeEventListener(el.eventName, el.eventHandler);\n\t      }\n\t    });\n\t  });\n\t  pianoInstance.pianoEnhancedEvents = [];\n\t}\n\t\n\tfunction addMultipleListeners(context, child, events, target, handler) {\n\t  if (child.pianoEnhancedEvents && child.pianoEnhancedEvents.length > -1) {\n\t    child.pianoEnhancedEvents.push([]);\n\t  } else {\n\t    child.pianoEnhancedEvents = [];\n\t    child.pianoEnhancedEvents.push([]);\n\t  }\n\t  events = events instanceof Array ? events : [events];\n\t  events.forEach(function (eventName) {\n\t    child.pianoEnhancedEvents[child.pianoEnhancedEvents.length - 1].push({\n\t      eventName: eventName,\n\t      target: target,\n\t      eventHandler: function eventHandler(event) {\n\t        if (event.timeStamp !== context.lastTimeStamp) {\n\t          handler(event);\n\t        }\n\t        context.lastTimeStamp = event.timeStamp;\n\t      }\n\t    });\n\t  });\n\t  child.pianoEnhancedEvents[child.pianoEnhancedEvents.length - 1].forEach(function (ee) {\n\t    ee.target.addEventListener(ee.eventName, ee.eventHandler);\n\t  });\n\t}\n\t\n\t// Helpers function for piano object\n\tfunction debounce(func, wait, immediate) {\n\t  var timeout;\n\t  return function () {\n\t    var context = this;\n\t    var args = arguments;\n\t    var later = function later() {\n\t      timeout = null;\n\t      if (!immediate) {\n\t        func.apply(context, args);\n\t      }\n\t    };\n\t    var callNow = immediate && !timeout;\n\t    clearTimeout(timeout);\n\t    timeout = setTimeout(later, wait || 200);\n\t    if (callNow) {\n\t      func.apply(context, args);\n\t    }\n\t  };\n\t}\n\t\n\tmodule.exports = Piano;\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=piano.js.map"]}